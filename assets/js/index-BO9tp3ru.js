import{b as W}from"./vue-router-CNO1fUVn.js";import{x as X}from"./@element-plus-e7foqBra.js";import{c as J,_ as Y}from"./index-Db6VnN3C.js";import{d as Z,b as y,j as x,i as ee,ah as g,o as m,M as k,a as s,O as r,U as i,S as O,R as V,c as A,F as te,a7 as oe,u as le,aD as se,bm as ae,bk as ne,a9 as re,T as S}from"./@vue-HrMasQv8.js";import"./pinia-KM1LF1CQ.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-i18n-BvBBS3QZ.js";import"./@intlify-COHHyPI8.js";import"./vue-CE7TxhWI.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-Bx-CsPDi.js";import"./axios-Cm0UX6qg.js";import"./element-plus-CXqQ8W6I.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-D31sEaKM.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CphgU6An.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-FEUMNzka.js";import"./qs-Bc-_vL76.js";import"./side-channel-nON-R0av.js";import"./get-intrinsic-B1Ut8WxJ.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-B8G-TZ45.js";import"./hasown-B9bXSDSU.js";import"./call-bind-Aj7T_c8u.js";import"./set-function-length-Ct5B6P4y.js";import"./define-data-property-CUxyvwXF.js";import"./es-define-property-28jGrh5V.js";import"./gopd-O61WwtTx.js";import"./has-property-descriptors-Cvfij9iw.js";import"./object-inspect-CZY0DhK8.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CDkJeOvw.js";const B="http://47.93.19.22:8000/";function ie(v){let _=B+"api/question/query/problem";return J.withAuth(J.POST,_,{data:{question_num:v}})}const ce=(v,_)=>{let l=B+"api/question/query/answer";return J.withAuth(J.POST,l,{data:{question_num:v,list:_}})},ue=v=>(ae("data-v-16328227"),v=v(),ne(),v),pe={style:{"margin-top":"60px","text-align":"center","line-height":"2"}},de=ue(()=>s("br",null,null,-1)),_e={class:"start-button"},me={key:1},ve={class:"scrollbar-container"},fe={class:"card-header"},he={style:{"font-size":"medium"}},ge={style:{"font-size":"small","line-height":"1.5"}},be={style:{"font-size":"small","line-height":"1.5"}},ye={style:{display:"block"}},Se={style:{"font-size":"small","line-height":"1.5"}},we={style:{"font-size":"small","line-height":"1.5"}},Ce={key:0,style:{"margin-left":"7%","margin-right":"7%"}},ke={class:"flex-warp-item-box",style:{display:"flex","justify-content":"center","margin-top":"20px","margin-bottom":"20px"}},Ne=Z({__name:"index",setup(v){const _=y([]),l=y([]),w=y([]),C=y(!0),f=y(!1),n=y(!1),h=y(0),D=()=>{w.value.forEach(t=>{t.correct===!0&&(h.value+=10)})},R=x(()=>w.value.reduce((t,e)=>(t[e.question_id]=e.correct?"success":"error",t),{})),T=t=>R.value[t]==="success",E=x(()=>w.value.reduce((t,e)=>(t[e.question_id]=e.correct_ans,t),{})),q=t=>{let e=" ";const o=E.value[t];return o&8&&(e=e.concat("A ")),o&4&&(e=e.concat("B ")),o&2&&(e=e.concat("C ")),o&1&&(e=e.concat("D ")),e},F=t=>{let e=" ";return l.value[t].a_option&&(e=e.concat("A ")),l.value[t].b_option&&(e=e.concat("B ")),l.value[t].c_option&&(e=e.concat("C ")),l.value[t].d_option&&(e=e.concat("D ")),e},I=(t,e)=>{if(_.value[t].type===0){const p=l.value[t];Object.keys(p).forEach(c=>{c!==e&&(p[c]=!1)})}},z=()=>{ie(10).then(e=>{_.value=Object.values(e.data).find(Array.isArray)})},Q=()=>{l.value.splice(0,l.value.length);for(let t=1;t<=10;t++){let e={a_option:!1,b_option:!1,c_option:!1,d_option:!1};l.value.push(e)}},L=(t,e,o,p)=>{const c=`${Number(t)}${Number(e)}${Number(o)}${Number(p)}`;return parseInt(c,2)};W().beforeEach((t,e,o)=>{U(),o()}),ee(()=>{j()}),window.addEventListener("beforeunload",()=>{U()});function U(){localStorage.setItem("questions",JSON.stringify(_.value)),localStorage.setItem("answers",JSON.stringify(l.value)),localStorage.setItem("results",JSON.stringify(w.value)),localStorage.setItem("showOriginal",JSON.stringify(C.value)),localStorage.setItem("showQuestions",JSON.stringify(f.value)),localStorage.setItem("showResult",JSON.stringify(n.value)),localStorage.setItem("score",JSON.stringify(h.value))}function j(){const t=localStorage.getItem("questions");t==null?z():_.value=JSON.parse(t);const e=localStorage.getItem("answers");e==null?Q():l.value=JSON.parse(e);const o=localStorage.getItem("results");o==null?h.value=0:w.value=JSON.parse(o);const p=localStorage.getItem("showOriginal");p==null?C.value=!0:C.value=JSON.parse(p);const c=localStorage.getItem("showQuestions");c==null?f.value=!1:f.value=JSON.parse(c);const N=localStorage.getItem("showResult");N==null?n.value=!1:n.value=JSON.parse(N);const b=localStorage.getItem("score");b==null?h.value=0:h.value=JSON.parse(b)}const M=()=>{z(),Q(),C.value=!1,f.value=!0,n.value=!1,h.value=0},P=()=>{C.value=!0,f.value=!1,n.value=!1,h.value=0},K=()=>{let t=[];l.value.forEach((o,p)=>{let c=L(o.a_option,o.b_option,o.c_option,o.d_option);t.push({question_id:_.value[p].question_id,student_answer:c})}),ce(10,t).then(o=>{w.value=o.data.list,D(),n.value=!0})};return(t,e)=>{const o=g("el-alert"),p=g("el-text"),c=g("el-button"),N=g("el-card"),b=g("el-checkbox"),G=g("el-divider"),H=g("ele-Check"),$=g("el-icon");return m(),k(se,null,[s("div",null,[C.value?(m(),k(N,{key:0,class:"main-card",shadow:"always"},{default:r(()=>[i(o,{title:"欢迎来到答题界面！",type:"success",description:" ",center:"",closable:!1,style:{"margin-top":"40px"}}),s("div",pe,[i(p,{class:"mx-1"},{default:r(()=>[O(" 在这里巩固你的安全知识吧！ "),de,O(" 点击下方开始答题进行练习，共10道题，总分100分。题型包括单选、多选。 ")]),_:1})]),s("div",_e,[i(c,{color:"#626aef",size:"large",plain:"",onClick:M},{default:r(()=>[O(" 开始答题 ")]),_:1})])]),_:1})):V("",!0),f.value?(m(),A("div",me,[s("div",ve,[(m(!0),A(te,null,oe(_.value,(u,a)=>(m(),A("div",{key:a},[i(N,{class:"question_card",shadow:"hover"},re({header:r(()=>[s("div",fe,[s("span",he,S(a+1)+"."+S(u.type===1?"（多选题）":"（单选题）")+S(u.content.title),1)])]),default:r(()=>[s("div",null,[s("div",null,[i(b,{modelValue:l.value[a].a_option,"onUpdate:modelValue":d=>l.value[a].a_option=d,label:"A. "+u.content.a_option,size:"large",disabled:n.value,onChange:d=>I(a,"a_option"),class:"option-box"},{default:r(()=>[s("span",ge,S("A. "+u.content.a_option),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","disabled","onChange"])]),s("div",null,[i(b,{modelValue:l.value[a].b_option,"onUpdate:modelValue":d=>l.value[a].b_option=d,label:"B. "+u.content.b_option,size:"large",disabled:n.value,onChange:d=>I(a,"b_option"),class:"option-box"},{default:r(()=>[s("span",be,S("B. "+u.content.b_option),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","disabled","onChange"])]),s("div",ye,[i(b,{modelValue:l.value[a].c_option,"onUpdate:modelValue":d=>l.value[a].c_option=d,label:"C. "+u.content.c_option,size:"large",disabled:n.value,onChange:d=>I(a,"c_option"),class:"option-box"},{default:r(()=>[s("span",Se,S("C. "+u.content.c_option),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","disabled","onChange"])]),s("div",null,[i(b,{modelValue:l.value[a].d_option,"onUpdate:modelValue":d=>l.value[a].d_option=d,label:"D. "+u.content.d_option,size:"large",disabled:n.value,onChange:d=>I(a,"d_option"),class:"option-box"},{default:r(()=>[s("span",we,S("D. "+u.content.d_option),1)]),_:2},1032,["modelValue","onUpdate:modelValue","label","disabled","onChange"])])])]),_:2},[n.value?{name:"footer",fn:r(()=>[T(u.question_id)?(m(),k(o,{key:0,title:"回答正确",type:"success",closable:!1})):(m(),k(o,{key:1,title:"回答错误，您的回答是"+F(a)+"，正确答案是"+q(u.question_id),type:"error",closable:!1},null,8,["title"]))]),key:"0"}:void 0]),1024),i(G)]))),128))]),n.value?(m(),A("div",Ce,[i(o,{title:`本次得分${h.value}分，继续加油！`,type:"success",effect:"dark",closable:!1},null,8,["title"])])):V("",!0),s("div",ke,[f.value&&!n.value?(m(),k(c,{key:0,type:"success",size:"large",onClick:K},{default:r(()=>[i($,null,{default:r(()=>[i(H)]),_:1}),O(" 提交 ")]),_:1})):V("",!0),f.value&&n.value?(m(),k(c,{key:1,type:"info",size:"large",onClick:P},{default:r(()=>[i($,null,{default:r(()=>[i(le(X))]),_:1}),O(" 返回 ")]),_:1})):V("",!0)])])):V("",!0)])],1024)}}}),dt=Y(Ne,[["__scopeId","data-v-16328227"]]);export{dt as default};
