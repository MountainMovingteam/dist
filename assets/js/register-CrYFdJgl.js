import{u as k,b as I}from"./vue-router-CNO1fUVn.js";import{_ as N}from"./index-Db6VnN3C.js";import{a as B}from"./formatTime-in1fXasu.js";import{v as T}from"./vue-i18n-BvBBS3QZ.js";import{u as w}from"./index-BnR1xakT.js";import{e as h}from"./rsa-DQFEFjmB.js";import{E as d}from"./element-plus-CXqQ8W6I.js";import{d as x,b as D,Z as E,j as M,ah as l,ap as R,o as F,M as v,O as r,U as o,S as j,a as c,I as V,P as z,T as A}from"./@vue-HrMasQv8.js";import"./pinia-KM1LF1CQ.js";import"./vue-demi-Dq6ymT-8.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-e7foqBra.js";import"./nprogress-Bx-CsPDi.js";import"./@intlify-COHHyPI8.js";import"./axios-Cm0UX6qg.js";import"./qs-Bc-_vL76.js";import"./side-channel-nON-R0av.js";import"./get-intrinsic-B1Ut8WxJ.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-B8G-TZ45.js";import"./hasown-B9bXSDSU.js";import"./call-bind-Aj7T_c8u.js";import"./set-function-length-Ct5B6P4y.js";import"./define-data-property-CUxyvwXF.js";import"./es-define-property-28jGrh5V.js";import"./gopd-O61WwtTx.js";import"./has-property-descriptors-Cvfij9iw.js";import"./object-inspect-CZY0DhK8.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CDkJeOvw.js";import"./vue-CE7TxhWI.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-D31sEaKM.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CphgU6An.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-FEUMNzka.js";import"./jsencrypt-D3I3x59l.js";const L=x({name:"register"}),O=x({...L,emits:["refresh"],setup(Z,{emit:y}){T.useI18n(),k();const b=I(),p=D(0),C=y,e=E({isShowPassword:!1,isShowPassword_confirm:!1,ruleForm:{student_id:"",userName:"",password:"",password_confirm:"",email:"",code:""},loading:{register:!1}}),P=()=>{if(e.ruleForm.email==""){d.error("邮箱为空");return}try{const s=w().getCode({email:e.ruleForm.email}),t=document.getElementById("getCodeButton");if(t!=null){t.disabled=!0,p.value=60;const u=setInterval(()=>{p.value>0?(p.value--,t.innerText=`${p.value} 秒后重新获取`):(clearInterval(u),t.disabled=!1,t.innerText="获取验证码")},1e3)}}catch(s){d.warning(s.response.data.reason)}},S=async()=>{if(e.loading.register=!0,e.ruleForm.password!=e.ruleForm.password_confirm)e.loading.register=!1,d.warning("注册失败，两次输入的密码不一致");else try{let s={id:e.ruleForm.student_id,name:e.ruleForm.userName,password:await h(e.ruleForm.password),comfirmPassword:await h(e.ruleForm.password_confirm),email:e.ruleForm.email,phone:"",academy:0,avatar:"",email_code:e.ruleForm.code};const t=await w().register(s);d.success("注册成功,请登录"),C("refresh"),b.push("/home")}catch(s){console.error("Error registerg in:",s.response),d.warning(s.response.data.reason)}finally{e.loading.register=!1}};return M(()=>B(new Date)),(s,t)=>{const u=l("ele-User"),n=l("el-icon"),m=l("el-input"),i=l("el-form-item"),f=l("ele-Message"),_=l("el-button"),g=l("ele-Unlock"),U=l("el-form"),$=R("waves");return F(),v(U,{size:"large",class:"login-content-form"},{default:r(()=>[o(i,{class:"login-animation1"},{default:r(()=>[o(m,{text:"",placeholder:s.$t("message.register.placeholder1"),modelValue:e.ruleForm.student_id,"onUpdate:modelValue":t[0]||(t[0]=a=>e.ruleForm.student_id=a),clearable:"",autocomplete:"off"},{prefix:r(()=>[o(n,{class:"el-input__icon"},{default:r(()=>[o(u)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation2"},{default:r(()=>[o(m,{text:"",placeholder:s.$t("message.register.placeholder2"),modelValue:e.ruleForm.userName,"onUpdate:modelValue":t[1]||(t[1]=a=>e.ruleForm.userName=a),clearable:"",autocomplete:"off"},{prefix:r(()=>[o(n,{class:"el-input__icon"},{default:r(()=>[o(u)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation3"},{default:r(()=>[o(m,{text:"",placeholder:s.$t("message.register.placeholder6"),modelValue:e.ruleForm.email,"onUpdate:modelValue":t[2]||(t[2]=a=>e.ruleForm.email=a),clearable:"",autocomplete:"off"},{prefix:r(()=>[o(n,{class:"el-input__icon"},{default:r(()=>[o(f)]),_:1})]),append:r(()=>[o(_,{id:"getCodeButton",onClick:P,disabled:p.value>0},{default:r(()=>[j(" 获取验证码 ")]),_:1},8,["disabled"])]),_:1},8,["placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation4"},{default:r(()=>[o(m,{text:"",placeholder:s.$t("message.register.placeholder7"),modelValue:e.ruleForm.code,"onUpdate:modelValue":t[3]||(t[3]=a=>e.ruleForm.code=a),clearable:"",autocomplete:"off"},{prefix:r(()=>[o(n,{class:"el-input__icon"},{default:r(()=>[o(f)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation5"},{default:r(()=>[o(m,{type:e.isShowPassword?"text":"password",placeholder:s.$t("message.register.placeholder3"),modelValue:e.ruleForm.password,"onUpdate:modelValue":t[5]||(t[5]=a=>e.ruleForm.password=a),autocomplete:"off"},{prefix:r(()=>[o(n,{class:"el-input__icon"},{default:r(()=>[o(g)]),_:1})]),suffix:r(()=>[c("i",{class:V(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:t[4]||(t[4]=a=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation6"},{default:r(()=>[o(m,{type:e.isShowPassword_confirm?"text":"password",placeholder:s.$t("message.register.placeholder4"),modelValue:e.ruleForm.password_confirm,"onUpdate:modelValue":t[7]||(t[7]=a=>e.ruleForm.password_confirm=a),autocomplete:"off"},{prefix:r(()=>[o(n,{class:"el-input__icon"},{default:r(()=>[o(g)]),_:1})]),suffix:r(()=>[c("i",{class:V(["iconfont el-input__icon login-content-password",e.isShowPassword_confirm?"icon-yincangmima":"icon-xianshimima"]),onClick:t[6]||(t[6]=a=>e.isShowPassword_confirm=!e.isShowPassword_confirm)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation7"},{default:r(()=>[z((F(),v(_,{round:"",type:"primary",class:"login-content-submit",onClick:S,loading:e.loading.register},{default:r(()=>[c("span",null,A(s.$t("message.register.btnText")),1)]),_:1},8,["loading"])),[[$]])]),_:1})]),_:1})}}}),Te=N(O,[["__scopeId","data-v-2539fa00"]]);export{Te as default};
